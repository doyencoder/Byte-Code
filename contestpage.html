<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="static/favicon.ico">
    <title>Contest | CP Arena</title>
    <link rel="stylesheet" href="static/stylecontestpage.css">
    <link rel="stylesheet" href="static/style.css">

</head>

<body>

    <div class="main">
        <nav>
            <span><img width="200px" src="images/logo.png" alt=""></span>
            <div class="separation"></div>
            <ul class="nav-links">
                <li><a href="home.html">Home</a></li>
                <li><a href="contest.html" id="contestnav">Contests</a></li>
                <li><a href="problem.html">Problems</a></li>
                <li><a href="profile.html">Profile</a></li>
            </ul>
            <div class="separation"></div>
            <div class="nav-buttons">
                <button onclick="location.href='login.html';" class="navbtn1">Login</button>
                <button onclick="location.href='login.html?signup=true';" class="navbtn1">Sign Up</button>
                <button onclick="location.href='login.html';" class="logoutbtn">Logout</button>
            </div>
            <div class="menu-icon" onclick="toggleMenu()">&#9776;</div> <!-- ☰ Menu Icon -->
        </nav>


        <div class="mobile-menu">
            <span class="close-btn" onclick="closeMenu()">&#10006;</span> <!-- ✖ Close Button -->
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="contest.html" id="contestnav">Contests</a></li>
                <li><a href="problem.html">Problems</a></li>
                <li><a href="profile.html">Profile</a></li>
            </ul>
            <div class="nav-buttons2">
                <button onclick="location.href='login.html';" class="navbtn2">Login</button>
                <button onclick="location.href='login.html?signup=true';" class="navbtn2">Sign Up</button>
            </div>

        </div>
        <div class="zero">
            <div id="timer-box" class="timer">
                <p><strong>Time Left:</strong> <span id="timer">02:00:00</span></p>
            </div>
            <div id="contest-container" class="box">
                <!-- Left side: Problems Table -->
                <div id="problems-table">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Rating</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="problems-list"></tbody>
                    </table>
                </div>
            </div>
            <button>Refresh</button>
            

        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // localStorage se contest ka data fetch karo
            let contestData = JSON.parse(localStorage.getItem("contestData")) || [];

            let problemsList = document.getElementById("problems-list");

            function loadProblems() {
                problemsList.innerHTML = "";
                contestData.forEach((q, index) => {
                    let row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td><a href="#">Problem ${index + 1}</a></td>
                        <td style="background-color: ${getColor(q.difficulty)}">${q.difficulty}</td>
                        <td style="background-color: lightpink">Pending</td>
                    `;
                    problemsList.appendChild(row);
                });
            }

            function getColor(rating) {
                if (rating < 1200) return "rgb(204, 204, 204)";
                if (rating < 1400) return "rgb(119, 255, 119)";
                if (rating < 1600) return "rgb(119, 221, 187)";
                if (rating < 1900) return "rgb(170, 170, 255)"
                return "violet";
            }

            loadProblems();

            // Timer Logic (2 Hours Countdown)
            let timeLeft = 7200;
            function updateTimer() {
                let hours = Math.floor(timeLeft / 3600);
                let minutes = Math.floor((timeLeft % 3600) / 60);
                let seconds = timeLeft % 60;
                document.getElementById("timer").textContent =
                    `${hours.toString().padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
                if (timeLeft > 0) {
                    timeLeft--;
                    setTimeout(updateTimer, 1000);
                }
            }
            updateTimer();

            // Refresh Button
            document.getElementById("refresh-btn").addEventListener("click", loadProblems);
        });

    </script>
</body>

</html>
